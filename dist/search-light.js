!function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,i){"use strict";function r(t,e){for(var i in e){var r=e[i];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i,r)}return t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o,a,h,c,l,u,f,m=function(){function t(t,e){var i=[],r=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(t){n=!0,s=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=Symbol("state_"),y=Symbol("settings_"),b=Symbol("nextIterator_"),v=Symbol("nextIteratorInjectAll_"),g=Symbol("nextIteratorInjectRelevance_"),j=Symbol("nextIteratorInjectMissingTerms_"),x=Symbol("propertyIterator_"),I=Symbol("searchIterator_"),S=Symbol("filterIterator_"),_=Symbol("checkRelevance_"),T=Symbol("sortComparator_"),A=Symbol("performSearch_"),M=Symbol("performSort_"),w=Symbol("updateMatches_"),k=Symbol("getItem_"),O=Symbol("getItemInjectAll_"),E=Symbol("getItemInjectRelevance_"),P=Symbol("getItemInjectMissingTerms_"),C=Symbol("toOriginalFormat_"),R=Symbol("updateConstraints_"),L=Symbol("areConstraints_"),B=(u={},n(u,d,{matches:[],partial:[],allItems:[],searchText:"",searchTerms:[],properties:[],filters:[],error:!1,errorMessage:"",index:0,lastIndex:0,totalMatches:0,ready:!1,complete:!1,searched:!1}),n(u,y,{collectionType:"array",comparison:{case:!1},relevance:{threshold:1,sort:!1},inject:{property:"searchResults",relevance:!1,missingTerms:!1}}),n(u,"search_",function(t){var e=[];return Array.isArray(t)?e=[].concat(s(t.keys())):"object"===(void 0===t?"undefined":p(t))?(e=Object.keys(t).filter(function(e){return t.hasOwnProperty(e)}),this[y].collectionType="object"):(this[d].error=!0,this[d].errorMessage="Invalid items type: ",void 0===t||p(t),console.warn(this[d].errorMessage)),console.log(this),this[d].collection=new Map(e.map(function(e){return[e,t[e]]})),this[d].complete=!1,this[d].searched=!1,this}),n(u,"for",function(t){if(this[d].ready=!1,this[d].complete=!1,this[d].searched=!1,"string"==typeof t)this[d].searchText=(this[d].searchText+" "+t).trim();else if("object"===(void 0===t?"undefined":p(t))){var e=void 0,i=void 0;if(Array.isArray(t)){var r=m(t,3);r[0],e=r[1],i=r[2]}else t.key,e=t.operator,i=t.value;void 0===i&&(i=e,e="==")}else console.warn("Invalid constraint type: ",void 0===t?"undefined":p(t));return this}),n(u,"and",function(t){return this.for(t)}),n(u,"in",function(t){if(this[d].ready=!1,this[d].complete=!1,this[d].searched=!1,"string"==typeof t)this[d].properties.push(t);else{var e;(e=this[d].properties).push.apply(e,s(t))}return this}),n(u,"or",function(t){return this.in(t)}),n(u,"sortedBy",function(t){return this[d].complete=!1,this[y].relevance.sort="relevance"===t,this}),n(u,"then",function(t,e){return new Promise(function(t,e){this[w](),this[d].error?e(Error(this[d].errorMessage)):t({matches:this.matches,partialMatches:this.partialMatches,allMatches:this.allMatches})}.bind(this)).then(t,e),this}),n(u,"catch",function(t){return this.then(void 0,t)}),n(u,Symbol.iterator,function(){return this[w](),this[y].inject.relevance&&this[y].inject.missingTerms?{next:this[v].bind(this)}:this[y].inject.relevance?{next:this[g].bind(this)}:this[y].inject.missingTerms?{next:this[j].bind(this)}:{next:this[b].bind(this)}}),n(u,b,function(){return this[d].index>this[d].lastIndex?{done:!0}:{done:!1,value:this[k](this[d].matches[this[d].index++])}}),n(u,v,function(){return this[d].index>this[d].lastIndex?{done:!0}:{done:!1,value:this[O](this[d].matches[this[d].index++])}}),n(u,g,function(){return this[d].index>this[d].lastIndex?{done:!0}:{done:!1,value:this[E](this[d].matches[this[d].index++])}}),n(u,j,function(){return this[d].index>this[d].lastIndex?{done:!0}:{done:!1,value:this[P](this[d].matches[this[d].index++])}}),n(u,x,function(t,e){return t[e]||null}),n(u,I,function(t,e,i){var r=e.split(i).length-1;r?t[1]+=r:t[2]+=" "+i}),n(u,S,function(t,e,i){var r=i[0],n=i[1],s=i[2];if("string"!=typeof t)switch(n){case"==":e[1]+=t[r]==s;break;case"===":e[1]+=t[r]===s;break;case"!=":e[1]+=t[r]!=s;break;case"!==":e[1]+=t[r]!==s;break;case">":e[1]+=t[r]>s;break;case">=":e[1]+=t[r]>=s;break;case"<":e[1]+=t[r]<s;break;case"<=":e[1]+=t[r]<=s;break;default:console.warn("Invalid filter operator:",n)}}),n(u,_,function(t,e){var i=[e,0,""],r="";this[d].filters.forEach(this[S].bind(this,t,i)),r="string"==typeof t?t:this[d].properties.length?this[d].properties.map(this[x].bind(this,t)).join("|"):Array.isArray(t)?t.join("|"):Object.values(t).join("|"),this[y].comparison.case||(r=r.toLowerCase()),this[d].searchTerms.forEach(this[I].bind(this,i,r)),this[d].allItems.push(i),0===i[1]||(i[1]<this[y].relevance.threshold?this[d].partial.push(i):this[d].matches.push(i))}),n(u,T,function(t,e){return e[1]>t[1]?1:e[1]===t[1]?e[0]<t[0]:-1}),n(u,A,function(){this[L]()?(this[d].allItems=[],this[d].matches=[],this[d].partial=[],this[d].collection.forEach(this[_].bind(this))):(this[d].allItems=this[d].collection.keys().map(function(t){return[key,0]}),this[d].matches=this[d].allItems,this[d].partial=[]),this[d].searched=!0}),n(u,w,function(){return this[d].complete||(this[d].searched||this[A](),this[M](this[d].matches),this[d].totalMatches=this[d].matches.length,this[d].index=0,this[d].lastIndex=this[d].totalMatches-1,this[d].complete=!0),this}),n(u,M,function(t){this[y].relevance.sort&&this[L]()&&t.length&&t.sort(this[T])}),n(u,k,function(t){return this[d].collection.get(t[0])}),n(u,O,function(t){var e=this[d].collection.get(t[0]);if(Array.isArray(e))e.push({relevance:t[1],missing:t[2]});else{if("object"!==(void 0===e?"undefined":p(e)))return e;e[this[y].inject.property]={relevance:t[1],missing:t[2]}}}),n(u,E,function(t){var e=this[d].collection.get(t[0]);if(Array.isArray(e))e.push({relevance:t[1]});else{if("object"!==(void 0===e?"undefined":p(e)))return e;e[this[y].inject.property]={relevance:t[1]}}}),n(u,P,function(t){var e=this[d].collection.get(t[0]);if(Array.isArray(e))e.push({missing:t[2]});else{if("object"!==(void 0===e?"undefined":p(e)))return e;e[this[y].inject.property]={missing:t[2]}}}),n(u,C,function(t){var e=this;if("array"===this[y].collectionType)return this[y].inject.relevance&&this[y].inject.missingTerms?t.map(function(t){return e[O](t)}):this[y].inject.relevance?t.map(function(t){return e[E](t)}):this[y].inject.missingTerms?t.map(function(t){return e[P](t)}):t.map(function(t){return e[k](t)});var i={};return this[y].inject.relevance&&this[y].inject.missingTerms?t.forEach(function(t){i[t[0]]=this[O](t)}):this[y].inject.relevance?t.forEach(function(t){i[t[0]]=this[E](t)}):this[y].inject.missingTerms?t.forEach(function(t){i[t[0]]=this[P](t)}):t.forEach(function(t){i[t[0]]=this[k](t)}),i}),n(u,R,function(){this[d].ready||(""===this[d].searchText?this[d].searchTerms=[]:this[d].searchTerms=(this[y].comparison.case?this[d].searchText:this[d].searchText.toLowerCase()).split(" "),this[d].ready=!0)}),n(u,L,function(){return this[R](),this[d].searchTerms.length||this[d].filters.length}),o="length",f={},f[o]=f[o]||{},f[o].get=function(){return this[w](),this[d].totalMatches},a="matches",f[a]=f[a]||{},f[a].get=function(){return this[w](),this[C](this[d].matches)},h="partialMatches",f[h]=f[h]||{},f[h].get=function(){return this[w](),this[M](this[d].partial),this[C](this[d].partial)},c="allMatches",f[c]=f[c]||{},f[c].get=function(){this[w]();var t=this[d].matches.concat(this[d].partial);return this[M](t),this[C](t)},l="allItems",f[l]=f[l]||{},f[l].get=function(){return this[w](),this[M](this[d].allItems),this[C](this[d].allItems)},r(u,f),u);B.search=B.search_.bind(B),e.default=B.search,"undefined"!=typeof window?window.SearchLight=B:"function"==typeof define&&i(0)&&define([],function(){return B.search})}]);